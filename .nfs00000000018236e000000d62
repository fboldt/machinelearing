#!/bin/bash

if [ `hostname` == 'ares' ]; then
  EXECUTOR='matlab'
else
  EXECUTOR='octave'
fi

if [ $# -lt 2 ]; then
  SEED=$RANDOM; 
else
  SEED=$2
fi

if [ $# -lt 3 ]; then
  DATASET='cwru-pool.m';  
else
  DATASET=$3; 
fi

if [ $# -ge 1 ]; then
	METHOD=$1; 
	echo $SEED
	if [ $EXECUTOR == 'matlab' ]; then
		echo matlab
		OUTPUTFILE="results/$DATASET.$METHOD.$SEED"; /export/thomas/usr/local/MATLAB/MATLAB_Production_Server/R2015a/bin/matlab -nodisplay <<< "experiment_feature_selection(load('datasets/$DATASET'), 'feature_selection_$METHOD', $SEED)" > $OUTPUTFILE; cat $OUTPUTFILE
	else
		echo octave
		OUTPUTFILE="results/$DATASET.$METHOD.$SEED"; octave <<< "experiment_feature_selection(load('datasets/$DATASET'), 'feature_selection_$METHOD', $SEED)" > $OUTPUTFILE; cat $OUTPUTFILE
	fi
	killall watch
else
	echo "Use: $0 feature_selection_method_name [seed]"
fi

